{% extends 'base.html' %}

{% block title %}View Files{% endblock %}
{% block link %}<link rel="stylesheet" href="{{ url_for('static', filename='css/view.css') }}"> {% endblock %}

{% block content %}
    <div class="container">
        <div class="header">
            <h1>View All Files</h1>
        </div>

        <div class="containter-view">
            {% if files %}
            <span class="tfiles"><p>Total files: {{ files.total }}</p></span> <br>
                {% for file in files %}
                    <div class="file-view">
                        <p>Submitter: {{ file.uploader_name }}</p>
                        <p>Mat_No: {{ file.mat_no }}</p>
                        <p>Level: {{ file.level }}</p>
                        <p>Group: {{ file.group }}</p>
                        <p>Uploaded: {{ file.uploaded_at }}</p>
                        <p>File: {{ file.original_filename }} {{ bytes_converter(file.file_size) }} </p>
                        <form action="{{ url_for('main_bp.delete_file', file_id=file.id) }}" method="post">
                            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

                            <button class="delete-file" type="submit">Delete File</button>
                        </form>
                    </div>
                {% endfor %}
                
                <div class="next-prev">
                    {% if next %}
                        <span class="next"><a href="{{ next }}">Next Files</a></span>
                    {% endif %}
    
                    {% if prev %}
                        <span class="prev"><a href="{{ prev }}">Prev Files</a></span>
                    {% endif %}
                </div>
            {% else %}
                <p class="no-upload">No uploaded files yet</p>
            {% endif %}
        </div>
    </div>
{% endblock %}